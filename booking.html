<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Book Plot â€“ Padmavati Greens</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600;700&family=Outfit:wght@300;400;500;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="css/style.css">
</head>
<body>
<div class="page-wrap">
  <div class="booking-layout">

    <!-- LEFT: Form -->
    <div class="booking-form-col">
      <div class="page-title">Book Plot</div>

      <!-- Customer Info -->
      <div class="card" style="margin-bottom:14px;">
        <div class="card-title">Customer Information</div>
        <div class="form-row">
          <div class="fg"><label>Full Name <span class="req">*</span></label>
            <input type="text" id="f-name" placeholder="e.g. Ramesh Sharma"></div>
          <div class="fg"><label>Phone <span class="req">*</span></label>
            <input type="tel" id="f-phone" placeholder="10-digit mobile"></div>
        </div>
        <div class="form-row">
          <div class="fg"><label>Aadhaar Number</label>
            <input type="text" id="f-aadhaar" placeholder="12-digit"></div>
          <div class="fg"><label>Referred By</label>
            <input type="text" id="f-ref" placeholder="Name or agent"></div>
        </div>
        <div class="fg"><label>Address</label>
          <input type="text" id="f-address" placeholder="Full address"></div>
      </div>

      <!-- Booking Info -->
      <div class="card" style="margin-bottom:14px;">
        <div class="card-title">Booking Details</div>
        <div class="form-row">
          <div class="fg"><label>Booking Date <span class="req">*</span></label>
            <input type="date" id="f-bookdate"></div>
          <div class="fg"><label>Manual Receipt No <span class="req">*</span></label>
            <input type="text" id="f-receipt1" placeholder="e.g. 1225"></div>
        </div>
        <div class="form-row">
          <div class="fg"><label>Payment Mode <span class="req">*</span></label>
            <select id="f-paymode">
              <option value="">Selectâ€¦</option>
              <option>Cash</option><option>NEFT / RTGS</option>
              <option>UPI</option><option>Cheque</option><option>DD</option>
            </select></div>
          <div class="fg"><label>Payment Reference</label>
            <input type="text" id="f-payref" placeholder="UTR / cheque no."></div>
        </div>
        <div class="fg"><label>Remarks</label>
          <input type="text" id="f-remarks" placeholder="Optional"></div>
      </div>

      <!-- Plots Section -->
      <div class="card" style="margin-bottom:14px;">
        <div class="card-title-row">
          <div class="card-title" style="margin:0;">Plots</div>
          <button type="button" class="btn-add-plot" id="addPlotBtn">+ Add Plot</button>
        </div>
        <div id="plotsContainer"></div>
      </div>

      <!-- Token -->
      <div class="card" style="margin-bottom:14px;">
        <div class="card-title">Token Amount</div>
        <div class="form-row">
          <div class="fg"><label>Total Token Amount (â‚¹) <span class="req">*</span></label>
            <input type="number" id="f-token" placeholder="e.g. 30000" min="0"></div>
          <div class="fg" id="tokenSplitInfo" style="display:none;">
            <label>Split (equal default â€” editable)</label>
            <div id="tokenSplitFields"></div>
          </div>
        </div>
        <div class="pay-hint">Cash â†’ CR &nbsp;|&nbsp; All other modes â†’ RR &nbsp;|&nbsp; Token split equally by default</div>
      </div>

      <button class="btn-submit" id="bookBtn">ðŸ“‹ Book Plot(s)</button>
    </div>

    <!-- RIGHT: Summary -->
    <div class="booking-summary-col">
      <div class="card sticky-summary" id="summaryCard">
        <div class="card-title">Booking Summary</div>
        <div id="summaryEmpty" style="color:var(--grey);font-size:.85rem;padding:20px 0;text-align:center;">
          Add plot(s) and enter rates to see summary
        </div>
        <div id="summaryContent" style="display:none;">
          <div id="plotsSummaryList"></div>
          <div class="summary-divider"></div>
          <div id="totalsSummary"></div>
          <div id="installmentBox" style="margin-top:16px;display:none;">
            <div class="card-title" style="font-size:.9rem;margin-bottom:10px;">Installment Schedule</div>
            <div id="scheduleContainer"></div>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- Confirmation Modal -->
<div class="overlay" id="confirmOverlay" style="display:none;">
  <div class="modal" style="max-width:700px;">
    <div class="modal-title">âœ… Booking Confirmed</div>
    <div id="confirmContent"></div>
    <div style="display:flex;gap:10px;margin-top:20px;flex-wrap:wrap;">
      <button class="btn-submit" id="shareWA" style="background:#25D366;">ðŸ“± WhatsApp</button>
      <button class="btn-submit" onclick="window.print()" style="background:var(--forest-mid);">ðŸ–¨ Print</button>
      <button class="btn-submit" id="newBookingBtn" style="background:var(--grey);">+ New Booking</button>
      <a href="bookings.html" class="btn-submit" style="text-decoration:none;text-align:center;background:var(--forest);">View Bookings</a>
    </div>
  </div>
</div>

<div id="toast"></div>
<script src="js/config.js"></script>
<script src="js/api.js"></script>
<script src="js/auth.js"></script>
<script src="js/utils.js"></script>
<script src="js/header.js"></script>
<script src="js/app/booking.js"></script>
</body>
</html>
